````agsl
          naver:
            client-id: K1PUwXXYVWZsR7jdayFI
            client-secret: fpyZk8a4ux
            scope:
              - email
              - name
            client-name: Naver
            authorization-grant-type: authorization_code # 코드를 통해 액세스 토큰을 받고 개인정보를 얻는 방식
            redirect-uri: http://localhost:8080/login/oauth2/code/naver #구글 페이스북은 이미 설정이 되어있어서 안적어줘도 된다만
````

네이버 로그인 구현을 위해 네이버 개발자 센터에서 id와 secret을 가져와 application.yml파일에 넣는다.
위에까지만 작성하면 컴파일 시 에러가 발생 -> provider 등록을 해야한다.

네이버 개발자 센터 - 문서에서 uri들을 가져와 작성한다

````agsl
        provider:
          naver:
            authorization-uri: https://nid.naver.com/oauth2.0/authorize
            token-uri: https://nid.naver.com/oauth2.0/token
            user-info-uri: https://openapi.naver.com/v1/nid/me
            user-name-attribute: response #회원정보를 json으로 받는데 response라는 키 값으로 네이버가 리턴해준다
````


이제 등록을 마쳤으니 로그인을 링크를 심어본다
````agsl
<a href="oauth2/authorization/google">구글 로그인</a> <!--이 주소도 oauth2 client 라이브러리를 쓰면 주소값은 고정이다-->
<a href="oauth2/authorization/facebook">페이스북 로그인</a> <!--이 주소도 oauth2 client 라이브러리를 쓰면 주소값은 고정이다-->
<a href="oauth2/authorization/naver">네이버 로그인</a> <!--이 주소도 oauth2 client 라이브러리를 쓰면 주소값은 고정이다-->
````
위 네이버 링크를 클릭할 경우 호출되는 주소는 //nid.naver.com/oauth2.0/authorize이다.
authorization-uri로 등록되어 있는 uri가 호출된다.

provider까지 등록을 마치면 OAuth2Client 라이브러리를 사용하여 네이버 로그인 진행을 할 수 있고,
DefaultOAuth2UserService을 implements한 PrincipalOauth2UserService의 loadUser메서드가 실행된다.

네이버 로그인의 경우 넘어오는 속성들을 보면
oAuth2User.getAttributes() = {resultcode=00, message=success, response={id=mdglqwAakVjA4TqyzGfnriT7JaA6EFtDwCKRXU5kuCI, email=treesheep@naver.com, name=이원준}}
이와 같은데 우리가 필요한 id, name, email은 response키에 매핑되어 있으므로
아래와 같이 NaverUserInfo객체를 생성할 때 response키에 매핑되어 있는 값들을 attributees로 넘겨줘야 한다
````agsl
 } else if (userRequest.getClientRegistration().getRegistrationId().equals("naver")) {
            oAuth2UserInfo = new NaverUserInfo((Map)oAuth2User.getAttributes().get("response"));
        } else {
            System.out.println("구글과 페이스북만 네이버만 지원");
        }
````

이제 OAuth2로그인으로 하는 구글, 페이스북, 네이버 로그인 모드 PricipaDetailse에 정보를 담아서 loadUser에서 리턴할 수 있다.
