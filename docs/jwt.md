jwt = json web token의 약자이다
jwt가 왜 사용되고 어디에 쓰이는 지 알아보자


Session
인증의 경우 기본적으로 세션을 사용하는데 세션에는 문제점이 있다.
동접자가 많은 경우 서버를 분산하여 로드 밸런싱 처리를 하는데, 이때 세션을 처리하기 위한 비용이 발생하기 때문이다.
하드디스크에 세션 정보를 저장하게 되면 I/O가 발생하여 현저히 느려진다.

TCP

응용계층 : 프로그램(lol)
프리젠테이션 : 암호화, 압축
세션계층 : 인증 체크
트랜스포트 : TCP / UDP
네트워크 :
데이터링크 :
물리 :

TCP는 신뢰성이 있는 통신이다. 잘 전달 되었는지 반응(ACK)을 확인한다.(웹)
UDP는 신뢰성이 없다. 보내고 끝이고 주로 사람이 이해할 수 있는 컨텐츠 전송에 쓰인다 (전화, 동영상)


CIA
기밀성, 무결성, 가용성

1. 열쇠 전달의 문제
2. 누구로 부터 왔는지  
3. -> 보안 해결할 수 있다
RSA(암호화)
public Key : 공용키
Private Key : 개인키

A 
공개키
B의 공개키로 암호화하고 A의 개인키로 포장해서 보낸다.

공개키로 암호화 한 건 개인키로 열 수 있다.
개인키로 암호화 한 건 공개키로 열 수 있다.

1. 문서를 받는다
2. A의 공개키로 열어본다 
  - 열리면 인증(o)
  - 안 열리면 인증(x)
3. B의 개인키로 열어본다
  - 암호화한 내용을 볼 수 있다  


헤더

페이로드

서명

서버는 전달받은 jwt에서 헤더와 페이로드를 전달받아 자신이 가진 비밀키(cos)와 결합하여 HMACSHA256으로 암호화를 해보고
jwt의 signature와 같다면 이 요청이 자신의 서버에서 인증된 요청인지를 판단할 수 있다


JWT는 "JSON Web Token"의 약자로, 웹 표준으로서 데이터를 안전하게 전달하기 위한 간단한 방법을 제공하는 토큰 기반의 인증 방식입니다. JWT는 일반적으로 클라이언트와 서버 간의 정보를 안전하게 전송하기 위해 사용되며, 웹 애플리케이션에서 사용자의 인증 및 권한 부여를 처리하는 데 널리 활용됩니다.

JWT는 세 부분으로 구성되어 있습니다: Header, Payload, Signature.

Header (헤더):
JWT의 헤더는 두 가지 정보를 포함하고 있습니다. 첫 번째는 토큰의 타입을 나타내는 "typ" 필드이고, 두 번째는 사용된 해싱 알고리즘을 나타내는 "alg" 필드입니다. 이 헤더는 Base64로 인코딩되어 있습니다.

Payload (페이로드):
페이로드는 클레임(claim)이라 불리는 데이터를 포함하고 있습니다. 클레임은 사용자에 대한 정보와 관련된 추가적인 데이터를 제공합니다. 클레임은 세 가지 유형으로 나뉩니다: 등록된 클레임, 공개 클레임, 비공개 클레임. 마찬가지로 페이로드는 Base64로 인코딩되어 있습니다.

Signature (서명):
서명은 헤더와 페이로드의 내용을 기반으로 생성되며, 비밀 키를 사용하여 생성됩니다. 서명은 토큰이 변경되지 않았음을 검증하는 데 사용됩니다.

JWT의 일반적인 사용 사례는 다음과 같습니다:

인증 및 권한 부여: 사용자가 로그인하면 서버는 JWT를 발급하고, 클라이언트는 이 토큰을 저장하고 나중에 서버에 전달하여 자원에 대한 액세스를 얻습니다.
정보 교환: JWT는 정보를 안전하게 전송하는 데 사용될 수 있습니다. 예를 들어, 두 서버 간에 안전한 방식으로 정보를 공유하는 데 활용될 수 있습니다.
JWT는 간단하면서도 유연하며, 많은 웹 애플리케이션에서 사용되고 있습니다. 그러나 주의할 점은 서버가 JWT를 안전하게 관리하고 검증해야 하며, 중요한 정보를 포함하는 경우에는 HTTPS와 함께 사용해야 합니다.


JWT(Jason Web Token)와 세션(Session)은 둘 다 인증(Authentication)과 관련된 웹 애플리케이션에서 사용되는 방법이지만, 각각의 특징과 작동 방식은 다릅니다.

JWT (JSON Web Token):
토큰 기반 인증:

JWT는 클라이언트와 서버 간의 인증을 토큰을 사용하여 처리합니다. 사용자가 로그인하면 서버는 JWT를 생성하고, 이를 클라이언트에게 전달합니다.
클라이언트는 이 토큰을 저장하고, 나중에 요청할 때 HTTP 헤더에 포함하여 서버에 전송합니다.
서버는 토큰을 검증하고, 필요한 권한이 부여된 경우에 요청을 처리합니다.
Self-contained (자체 포함성):

JWT는 헤더, 페이로드, 서명으로 구성되어 있으며, 이들을 Base64로 인코딩하여 하나의 문자열로 만듭니다.
토큰에는 클레임(claim)이라 불리는 정보들이 포함되어 있으며, 이는 사용자의 ID, 권한, 만료 시간 등을 나타냅니다.
Stateless (무상태성):

서버는 토큰을 검증하기 위해 내부적으로 필요한 정보를 포함하고 있으므로, 상태를 서버에 저장할 필요가 없습니다.
이는 서버의 확장성을 높이는 데 도움이 됩니다.
세션:
서버 측 저장:

세션은 서버 측에서 상태 정보를 저장하는 방식입니다. 사용자가 로그인하면 서버는 세션을 생성하고, 클라이언트에게 세션 ID를 제공합니다.
클라이언트는 이 세션 ID를 쿠키 또는 URL 매개변수 등을 통해 저장하고, 서버에 요청할 때마다 세션 ID를 함께 전송합니다.
유지 기간:

세션은 특정 시간 동안 유지됩니다. 사용자가 일정 시간 동안 활동이 없으면 세션이 만료될 수 있습니다.
세션의 만료 기간은 서버 측에서 설정하며, 보통은 일정 시간이 지나면 세션을 종료하도록 구성됩니다.
서버 상태 유지:

서버는 세션을 통해 사용자의 상태를 유지하고, 이를 통해 사용자의 로그인 상태 및 권한 등을 파악합니다.
세션은 서버 측에서 유지되므로 서버에 저장 공간이 필요합니다.
선택 사항:
JWT는 무상태적이고 클라이언트 측에서 상태를 유지하므로, 서버 확장성이 높아집니다. 그러나 보안적인 측면에서 서버에서 토큰을 검증하기 때문에 안전성을 고려해야 합니다.
세션은 서버 측에서 상태를 유지하므로, 서버에 부담을 줄 수 있지만, 세션 자체가 서버에 의해 안전하게 유지되기 때문에 일반적으로 안전성이 높습니다.
어떤 방식을 선택할지는 애플리케이션의 요구 사항과 보안 정책에 따라 다릅니다. 일부 애플리케이션은 JWT를 사용하여 무상태적이고 확장 가능한 인증을 선호하고, 다른 애플리케이션은 세션을 사용하여 서버 측에서 상태를 유지하고 보안성을 강화하는 것을 선호할 수 있습니다.